execute if entity @s[tag=rook] if score #temp PosX matches 0 if score #temp PosZ matches 0 run tellraw @a[tag=this_chess_game,distance=..0.5] {"translate":"medabots_server:message.player_interactions.chess.rook","color":"green"}

execute if entity @s[tag=white] if score #temp PosX matches 1 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] run teleport @s ~ ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 2 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~1 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 3 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~2 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 4 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~3 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 5 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~4 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 6 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~5 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 7 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~6 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -1 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] run teleport @s ~ ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -2 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-1 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -3 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-2 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -4 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-3 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -5 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-4 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -6 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-5 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches -7 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-6 ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] run teleport @s ~ ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 2 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~1
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 3 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~2
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 4 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~3
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 5 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~4
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 6 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~5
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches 7 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~6
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] run teleport @s ~ ~ ~
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -2 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-1
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -3 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-2
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -4 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-3
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -5 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-4
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -6 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-5
execute if entity @s[tag=white] if score #temp PosX matches 0 if score #temp PosZ matches -7 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-6

execute if entity @s[tag=white,tag=!moved,tag=rook] if score #temp PosX matches 0 if score #temp PosZ matches -3 if entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white,tag=king] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-2 run function medabots_server:items/player_interactions/chess/game/move/short_castling
execute if entity @s[tag=white,tag=!moved,tag=rook] if score #temp PosX matches 0 if score #temp PosZ matches 4 if entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=white,tag=king] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~3 run function medabots_server:items/player_interactions/chess/game/move/long_castling

execute if entity @s[tag=black] if score #temp PosX matches 1 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] run teleport @s ~ ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 2 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~1 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 3 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~2 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 4 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~3 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 5 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~4 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 6 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~5 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 7 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~-1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~6 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -1 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] run teleport @s ~ ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -2 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-1 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -3 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-2 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -4 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-3 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -5 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-4 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -6 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-5 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches -7 if score #temp PosZ matches 0 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~1 ~ ~ unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~-6 ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] run teleport @s ~ ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 2 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~1
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 3 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~2
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 4 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~3
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 5 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~4
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 6 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~5
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches 7 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~6
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] run teleport @s ~ ~ ~
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -2 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-1
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -3 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-2
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -4 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-3
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -5 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-4
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -6 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-5
execute if entity @s[tag=black] if score #temp PosX matches 0 if score #temp PosZ matches -7 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] run teleport @s ~ ~ ~-6

execute if entity @s[tag=black,tag=!moved,tag=rook] if score #temp PosX matches 0 if score #temp PosZ matches -3 if entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black,tag=king] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-2 run function medabots_server:items/player_interactions/chess/game/move/short_castling
execute if entity @s[tag=black,tag=!moved,tag=rook] if score #temp PosX matches 0 if score #temp PosZ matches 4 if entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=black,tag=king] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~-1 unless entity @e[type=minecraft:armor_stand,distance=..0.5,tag=this_chess_game,tag=chess_piece] positioned ~ ~ ~3 run function medabots_server:items/player_interactions/chess/game/move/long_castling

execute unless score #temp PosX matches 0 run tag @s[distance=..0.5,tag=rook] add moved
execute unless score #temp PosZ matches 0 run tag @s[distance=..0.5,tag=rook] add moved