execute if entity @e[x=0,y=44,z=0,dx=59,dy=13,dz=62,tag=mr_referee,type=minecraft:armor_stand,tag=finished] store result score @s BattlingMedabots if entity @e[scores={Stage=43},tag=medabot,tag=!enemy_medabot,tag=!ally_medabot]
execute if entity @e[x=0,y=44,z=0,dx=59,dy=13,dz=62,tag=mr_referee,type=minecraft:armor_stand,tag=finished] if entity @e[scores={Stage=43},tag=enemy_medabot] run scoreboard players add @s BattlingMedabots 1
execute if entity @e[x=0,y=44,z=0,dx=59,dy=13,dz=62,tag=mr_referee,type=minecraft:armor_stand,tag=finished] if entity @e[scores={Stage=43},tag=ally_medabot] run scoreboard players add @s BattlingMedabots 1
execute as @e[x=0,y=44,z=0,dx=59,dy=13,dz=62,type=!minecraft:player] unless entity @s[scores={Stage=0..}] run scoreboard players set @s Stage 43
execute as @e[scores={Stage=43},tag=practice_battle] run tag @e[scores={Stage=43},tag=medabot] add practice_robattle
execute as @s[scores={BattlingMedabots=1,State=1..}] run function medabots_server:stage/clean_up/lagdou_ruins_8
advancement grant @s[scores={BattlingMedabots=1,State=1..},advancements={medabots_server:stages/wave_1/lagdou_ruins_8_first_go=true}] only medabots_server:stages/wave_1/lagdou_ruins_8_second_go
advancement grant @s[scores={BattlingMedabots=1,State=1..},advancements={medabots_server:stages/wave_1/lagdou_ruins_8_first_go=false}] only medabots_server:stages/wave_1/lagdou_ruins_8_first_go
execute if entity @s[scores={BattlingMedabots=1,State=1..}] as @a[scores={Stage=43}] run function medabots_server:stage/get_score/time_damage_kills
execute if entity @s[scores={BattlingMedabots=1,State=1..}] as @a[scores={Stage=43}] positioned 29 58 31 run function medabots_server:stage/clear
scoreboard players reset @s[scores={BattlingMedabots=1..}] BattlingMedabots
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run fill 0 47 0 59 47 58 minecraft:water[level=0] replace minecraft:oak_slab
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run fill 0 45 0 59 45 58 minecraft:water[level=0] replace minecraft:oak_slab
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","1"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","2"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","3"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","4"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","5"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","6"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","7"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","8"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","9"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","10"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","11"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","12"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","13"]}
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_marker","14"]}
tag @e[sort=random,type=minecraft:area_effect_cloud,tag=bridge_marker,limit=7] add selected
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=1,tag=selected] run fill 6 47 5 11 47 10 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=2,tag=selected] run fill 3 47 26 5 47 31 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=3,tag=selected] run fill 0 47 41 2 47 49 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=4,tag=selected] run fill 12 47 44 14 47 49 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=5,tag=selected] run fill 15 47 56 17 47 58 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=6,tag=selected] run fill 33 47 53 38 47 55 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=7,tag=selected] run fill 57 47 32 59 47 40 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=8,tag=selected] run fill 48 47 17 53 47 19 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=9,tag=selected] run fill 27 47 41 29 47 52 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=10,tag=selected] run fill 36 47 32 44 47 34 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=11,tag=selected] run fill 27 47 23 29 47 28 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=12,tag=selected] run fill 33 47 20 44 47 22 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=13,tag=selected] run fill 27 47 14 22 47 16 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=14,tag=selected] run fill 15 47 17 26 47 19 minecraft:oak_slab[waterlogged=true,type=top]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=1,tag=selected] run fill 6 45 5 11 45 10 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=2,tag=selected] run fill 3 45 26 5 45 31 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=3,tag=selected] run fill 0 45 41 2 45 49 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=4,tag=selected] run fill 12 45 44 14 45 49 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=5,tag=selected] run fill 15 45 56 17 45 58 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=6,tag=selected] run fill 33 45 53 38 45 55 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=7,tag=selected] run fill 57 45 32 59 45 40 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=8,tag=selected] run fill 48 45 17 53 45 19 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=9,tag=selected] run fill 27 45 41 29 45 52 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=10,tag=selected] run fill 36 45 32 44 45 34 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=11,tag=selected] run fill 27 45 23 29 45 28 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=12,tag=selected] run fill 33 45 20 44 45 22 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=13,tag=selected] run fill 27 45 14 22 45 16 minecraft:oak_slab[waterlogged=true,type=bottom]
execute if entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=selected] unless entity @e[type=minecraft:area_effect_cloud,tag=bridge_marker,tag=14,tag=selected] run fill 15 45 17 26 45 19 minecraft:oak_slab[waterlogged=true,type=bottom]
kill @e[type=minecraft:area_effect_cloud,tag=bridge_marker]
execute unless entity @e[x=0,y=43,z=0,dx=59,dy=13,dz=62,tag=bridge_timer,type=minecraft:area_effect_cloud] run summon minecraft:area_effect_cloud ~ ~ ~ {CustomName:'{"translate":"medabots_server:entity.stage_randomizing_marker"}',Tags:["bridge_timer"],Duration:720}