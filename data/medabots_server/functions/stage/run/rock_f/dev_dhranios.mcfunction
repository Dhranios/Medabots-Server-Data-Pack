execute unless entity @e[scores={Stage=60},tag=hide_normal_time] run bossbar set medabots_server:rock_f/time players @s[scores={State=1..}]
execute unless entity @e[scores={Stage=60},tag=hide_normal_time] store result score #temp Time run bossbar get medabots_server:rock_f/time value
execute unless entity @e[scores={Stage=60},tag=hide_normal_time] store result bossbar medabots_server:rock_f/time value run scoreboard players operation #temp Time += #1 Constants
execute if entity @e[scores={Stage=60},tag=hide_normal_time] store result score #temp Time run bossbar get medabots_server:rock_f/robattle value
execute if entity @e[scores={Stage=60},tag=hide_normal_time] if entity @e[scores={Stage=60,Medabot=0..,State=1},tag=enemy_medabot,tag=!dying] store result bossbar medabots_server:rock_f/robattle value if score #temp Time matches 1.. run scoreboard players operation #temp Time -= #1 Constants
execute if entity @e[scores={Stage=60},tag=hide_normal_time] if score #temp Time matches 0 as @e[x=0,y=50,z=0,dx=60,dy=7,dz=60,tag=mission,type=minecraft:area_effect_cloud] at @s run function medabots_server:stage/referee_decides
scoreboard players reset #temp Time
execute if entity @s[scores={State=0}] run function medabots_server:stage/clean_up/rock_f
execute if entity @s[scores={State=0}] run function medabots_server:other/death
execute if entity @e[x=3.5,y=53,z=31.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=12.5,y=53,z=41.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=3.5,y=53,z=31.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=14.5,y=53,z=28.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=6.5,y=53,z=42.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=3.5,y=53,z=31.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=17.5,y=53,z=38.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=6.5,y=53,z=42.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=14.5,y=53,z=28.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=17.5,y=53,z=38.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=6.5,y=53,z=42.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=3.5,y=53,z=31.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=14.5,y=53,z=28.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=17.5,y=53,z=38.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=8.5,y=53,z=43.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=4.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=13.5,y=53,z=49.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=4.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=13.5,y=53,z=49.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=26.5,y=53,z=37.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=23.5,y=53,z=33.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=26.5,y=53,z=37.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=23.5,y=53,z=33.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=26.5,y=53,z=37.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=23.5,y=53,z=36.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=26.5,y=53,z=37.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=23.5,y=53,z=36.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=6.5,y=53,z=16.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=14.5,y=53,z=13.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=6.5,y=53,z=16.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=27.5,y=53,z=9.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=14.5,y=53,z=13.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=27.5,y=53,z=9.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=14.5,y=53,z=13.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=27.5,y=53,z=9.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] if entity @e[x=17.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=16.5,y=53,z=3.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=27.5,y=53,z=9.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=16.5,y=53,z=3.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=17.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=16.5,y=53,z=3.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=19.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] if entity @e[x=21.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] if entity @e[x=23.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] if entity @e[x=25.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=26.5,y=53,z=2.5,distance=..0.7,tag=laser_trap,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=19.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=26.5,y=53,z=2.5,distance=..0.7,tag=laser_trap,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=21.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=26.5,y=53,z=2.5,distance=..0.7,tag=laser_trap,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=23.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=26.5,y=53,z=2.5,distance=..0.7,tag=laser_trap,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=25.5,y=53,z=2.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=26.5,y=53,z=2.5,distance=..0.7,tag=laser_trap,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=51.5,y=53,z=7.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=40.5,y=53,z=15.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=26.5,y=53,z=14.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=24.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=25.5,y=53,z=27.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=51.5,y=53,z=15.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=53.5,y=53,z=22.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=53.5,y=53,z=21.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=53.5,y=53,z=22.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=53.5,y=53,z=21.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=53.5,y=53,z=22.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=36.5,y=53,z=31.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] if entity @e[x=41.5,y=53,z=50.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=43.5,y=53,z=32.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=36.5,y=53,z=31.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=43.5,y=53,z=32.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=41.5,y=53,z=50.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=43.5,y=53,z=32.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=26.5,y=53,z=54.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=26.5,y=53,z=54.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=23.5,y=53,z=50.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=40.5,y=53,z=49.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=42.5,y=53,z=20.5,distance=..0.7,tag=spring_wall,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=51.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=24.5,y=53,z=51.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=52.5,y=53,z=26.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=51.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=52.5,y=53,z=26.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=51.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=15.5,y=53,z=57.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] if entity @e[x=52.5,y=53,z=42.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=31.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=30.5,y=53,z=27.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=31.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerAmount=0..1}] PowerAmount 2
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=55.5,y=53,z=29.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=55.5,y=53,z=29.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=50.5,y=53,z=30.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=50.5,y=53,z=30.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=0}] run scoreboard players set @e[x=56.5,y=53,z=36.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=1}] PowerAmount 0
execute if entity @e[x=44.5,y=53,z=20.5,distance=..0.7,tag=floor_switch,type=minecraft:armor_stand,scores={Time=1..}] run scoreboard players set @e[x=56.5,y=53,z=36.5,distance=..0.7,tag=action_floor,type=minecraft:armor_stand,scores={PowerAmount=0}] PowerAmount 1
execute if block 7 53 34 minecraft:iron_trapdoor[open=true] if block 7 53 30 minecraft:black_stained_glass if entity @s[x=6,y=53,z=34,dx=3,dy=3,dz=3] run function medabots_server:stage/create/rock_f/dev_dhranios_battle/0
execute if entity @e[x=10.5,y=53,z=37.5,distance=..0.7,tag=mission,type=minecraft:area_effect_cloud] store result score @s BattlingMedabots if entity @e[scores={Stage=60,Medabot=0..,State=1}]
title @s[scores={BattlingMedabots=1,State=1..}] title {"translate":"medabots_server:message.stage.mission.complete","color":"green"}
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run kill @e[x=0,y=50,z=0,dx=60,dy=7,dz=60,tag=mission,type=minecraft:area_effect_cloud]
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run bossbar set medabots_server:rock_f/robattle players
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=7.5,y=53,z=34.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerAmount 1
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=7.5,y=53,z=30.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerAmount 1
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=27.5,y=53,z=26.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerAmount 1
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=51.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerNeeded 0
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=26.5,y=53,z=54.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerNeeded 0
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=31.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerNeeded 2
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=20.5,y=53,z=46.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=0}] PowerNeeded 1
scoreboard players reset @s[scores={BattlingMedabots=1..}] BattlingMedabots
execute if block 27 53 25 minecraft:iron_trapdoor[open=true] if block 5 53 27 minecraft:black_stained_glass if entity @s[x=26,y=53,z=22,dx=3,dy=3,dz=3] run function medabots_server:stage/create/rock_f/dev_dhranios_battle/1
execute if entity @e[x=26.5,y=53,z=21.5,distance=..0.7,tag=mission,type=minecraft:area_effect_cloud] store result score @s BattlingMedabots if entity @e[scores={Stage=60,Medabot=0..,State=1}]
title @s[scores={BattlingMedabots=1,State=1..}] title {"translate":"medabots_server:message.stage.mission.complete","color":"green"}
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run kill @e[x=0,y=50,z=0,dx=60,dy=7,dz=60,tag=mission,type=minecraft:area_effect_cloud]
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run bossbar set medabots_server:rock_f/robattle players
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=27.5,y=53,z=25.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerAmount 1
execute if entity @s[scores={BattlingMedabots=1,State=1..}] run scoreboard players set @e[x=5.5,y=53,z=27.5,distance=..0.7,tag=door,type=minecraft:armor_stand,scores={PowerNeeded=1}] PowerAmount 1
scoreboard players reset @s[scores={BattlingMedabots=1..}] BattlingMedabots
execute as @e[x=0,y=50,z=0,dx=60,dy=7,dz=60,type=!minecraft:player] unless entity @s[scores={Stage=0..}] run scoreboard players set @s Stage 60
execute if entity @s[tag=clear_stage] run function medabots_server:stage/clean_up/rock_f
advancement grant @s[tag=clear_stage] only medabots_server:developer_challenge/rock_f_dhranios
tag @s[tag=clear_stage,advancements={medabots_server:story_progression/other={rock_f_dhranios=true,rock_f_dhranios_cleared=false}}] add dialog_other_rock_f_dhranios_cleared
execute if entity @s[tag=clear_stage] positioned 29 59 30 run function medabots_server:stage/clear