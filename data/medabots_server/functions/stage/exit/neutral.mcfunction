tag @s add me

# Move to spectator area
execute if entity @s[scores={Stage=1}] unless entity @e[scores={Stage=1,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/grassland_a
execute if entity @s[scores={Stage=2}] unless entity @e[scores={Stage=2,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/rock_a
execute if entity @s[scores={Stage=3}] unless entity @e[scores={Stage=3,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/jungle_a
execute if entity @s[scores={Stage=4}] unless entity @e[scores={Stage=4,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/seashore_a
execute if entity @s[scores={Stage=5}] unless entity @e[scores={Stage=5,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/snowfield_a
execute if entity @s[scores={Stage=6}] unless entity @e[scores={Stage=6,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/iceberg_a
execute if entity @s[scores={Stage=7}] unless entity @e[scores={Stage=7,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_out_a
execute if entity @s[scores={Stage=8}] unless entity @e[scores={Stage=8,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_in_a
execute if entity @s[scores={Stage=9}] unless entity @e[scores={Stage=9,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/laboratory_a
execute if entity @s[scores={Stage=10}] unless entity @e[scores={Stage=10,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/grassland_b
execute if entity @s[scores={Stage=11}] unless entity @e[scores={Stage=11,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/rock_b
execute if entity @s[scores={Stage=12}] unless entity @e[scores={Stage=12,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/jungle_b
execute if entity @s[scores={Stage=13}] unless entity @e[scores={Stage=13,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/seashore_b
execute if entity @s[scores={Stage=14}] unless entity @e[scores={Stage=14,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/snowfield_b
execute if entity @s[scores={Stage=15}] unless entity @e[scores={Stage=15,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/iceberg_b
execute if entity @s[scores={Stage=16}] unless entity @e[scores={Stage=16,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_out_b
execute if entity @s[scores={Stage=17}] unless entity @e[scores={Stage=17,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_in_b
execute if entity @s[scores={Stage=18}] unless entity @e[scores={Stage=18,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/laboratory_b
execute if entity @s[scores={Stage=19}] unless entity @e[scores={Stage=19,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/park_a
execute if entity @s[scores={Stage=20}] unless entity @e[scores={Stage=20,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/park_b
execute if entity @s[scores={Stage=21}] unless entity @e[scores={Stage=21,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/paradise_a
execute if entity @s[scores={Stage=22}] unless entity @e[scores={Stage=22,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/paradise_b
execute if entity @s[scores={Stage=23}] unless entity @e[scores={Stage=23,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/grassland_c
execute if entity @s[scores={Stage=24}] unless entity @e[scores={Stage=24,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/jungle_c
execute if entity @s[scores={Stage=25}] unless entity @e[scores={Stage=25,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/seashore_c
execute if entity @s[scores={Stage=26}] unless entity @e[scores={Stage=26,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/iceberg_c
execute if entity @s[scores={Stage=27}] unless entity @e[scores={Stage=27,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_out_c
execute if entity @s[scores={Stage=28}] unless entity @e[scores={Stage=28,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/laboratory_c
execute if entity @s[scores={Stage=29}] unless entity @e[scores={Stage=29,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/boxer
execute if entity @s[scores={Stage=30}] unless entity @e[scores={Stage=30,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/grassland_d
execute if entity @s[scores={Stage=31}] unless entity @e[scores={Stage=31,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/jungle_d
execute if entity @s[scores={Stage=32}] unless entity @e[scores={Stage=32,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/snowfield_d
execute if entity @s[scores={Stage=33}] unless entity @e[scores={Stage=33,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/iceberg_d
execute if entity @s[scores={Stage=34}] unless entity @e[scores={Stage=34,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_in_d
execute if entity @s[scores={Stage=35}] unless entity @e[scores={Stage=35,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/laboratory_d
execute if entity @s[scores={Stage=36}] unless entity @e[scores={Stage=36,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_1
execute if entity @s[scores={Stage=37}] unless entity @e[scores={Stage=37,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_2
execute if entity @s[scores={Stage=38}] unless entity @e[scores={Stage=38,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_3
execute if entity @s[scores={Stage=39}] unless entity @e[scores={Stage=39,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_4
execute if entity @s[scores={Stage=40}] unless entity @e[scores={Stage=40,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_5
execute if entity @s[scores={Stage=41}] unless entity @e[scores={Stage=41,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_6
execute if entity @s[scores={Stage=42}] unless entity @e[scores={Stage=42,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_7
execute if entity @s[scores={Stage=43}] unless entity @e[scores={Stage=43,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_8
execute if entity @s[scores={Stage=44}] unless entity @e[scores={Stage=44,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_9
execute if entity @s[scores={Stage=45}] unless entity @e[scores={Stage=45,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/lagdou_ruins_10
execute if entity @s[scores={Stage=46}] unless entity @e[scores={Stage=46,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ricco_harbor
execute if entity @s[scores={Stage=47}] unless entity @e[scores={Stage=47,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/woods_battle
execute if entity @s[scores={Stage=48}] unless entity @e[scores={Stage=48,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/icefield_battle
execute if entity @s[scores={Stage=49}] unless entity @e[scores={Stage=49,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_battle
execute if entity @s[scores={Stage=50}] unless entity @e[scores={Stage=50,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/park_battle
execute if entity @s[scores={Stage=51}] unless entity @e[scores={Stage=51,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/mt_battle
execute if entity @s[scores={Stage=52}] unless entity @e[scores={Stage=52,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/grassland_e
execute if entity @s[scores={Stage=53}] unless entity @e[scores={Stage=53,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/rock_e
execute if entity @s[scores={Stage=54}] unless entity @e[scores={Stage=54,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/jungle_e
execute if entity @s[scores={Stage=55}] unless entity @e[scores={Stage=55,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/seashore_e
execute if entity @s[scores={Stage=56}] unless entity @e[scores={Stage=56,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/snowfield_e
execute if entity @s[scores={Stage=57}] unless entity @e[scores={Stage=57,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/iceberg_e
execute if entity @s[scores={Stage=58}] unless entity @e[scores={Stage=58,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_out_e
execute if entity @s[scores={Stage=59}] unless entity @e[scores={Stage=59,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/ruins_in_e
execute if entity @s[scores={Stage=60}] unless entity @e[scores={Stage=60,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/rock_f
execute if entity @s[scores={Stage=61}] unless entity @e[scores={Stage=61,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/final_destination_1
execute if entity @s[scores={Stage=62}] unless entity @e[scores={Stage=62,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/final_destination_2
execute if entity @s[scores={Stage=63}] unless entity @e[scores={Stage=63,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/final_destination_3
execute if entity @s[scores={Stage=64}] unless entity @e[scores={Stage=64,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/final_destination_4
execute if entity @s[scores={Stage=65}] unless entity @e[scores={Stage=65,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/subspace_1
execute if entity @s[scores={Stage=66}] unless entity @e[scores={Stage=66,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/subspace_2
execute if entity @s[scores={Stage=67}] unless entity @e[scores={Stage=67,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/subspace_3
execute if entity @s[scores={Stage=68}] unless entity @e[scores={Stage=68,State=1..2},tag=medabot,tag=!me] run function medabots_server:stage/leave_stage/arena

# Is in combat, so kill instead
tag @s remove me
execute if entity @s[scores={State=1..2}] run function medabots_server:other/kill