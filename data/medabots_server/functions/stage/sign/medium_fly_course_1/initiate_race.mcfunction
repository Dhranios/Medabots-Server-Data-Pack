execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] unless score @s Money >= @s FlyCourseFee run tellraw @s {"translate":"medabots_server:message.stage.fly_course.no_money","color":"green"}

execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run function medabots_server:gamemodes/fly_course/set_stats
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run scoreboard players set @s Stage 2
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run scoreboard players set @s StageIndex -1
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run scoreboard players operation @s PayedFee = @s FlyCourseFee
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run setblock -90 122 -79 minecraft:sea_lantern
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run data merge block -89 121 -79 {Text1:'{"text":"","clickEvent":{"action":"run_command","value":"function medabots_server:stage/join/medium_fly_course_1/try"}}'}
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run execute if entity @s[scores={FlyCourseLaps=0,FlyCourseFee=0}] run tellraw @a {"translate":"medabots_server:message.stage.fly_course.start_race.fallout","color":"green","with":[{"translate":"medabots_server:location.fly_course.medium"},{"text":"1"}]}
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run execute if entity @s[scores={FlyCourseLaps=0,FlyCourseFee=2..}] run tellraw @a {"translate":"medabots_server:message.stage.fly_course.start_race.fallout.money","color":"green","with":[{"translate":"medabots_server:location.fly_course.medium"},{"text":"1"},{"score":{"objective":"FlyCourseFee","name":"@s"}}]}
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run execute if entity @s[scores={FlyCourseLaps=1..,FlyCourseFee=0}] run tellraw @a {"translate":"medabots_server:message.stage.fly_course.start_race.laps","color":"green","with":[{"score":{"objective":"FlyCourseLaps","name":"@s"}},{"translate":"medabots_server:location.fly_course.medium"},{"text":"1"}]}
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run execute if entity @s[scores={FlyCourseLaps=1..,FlyCourseFee=2..}] run tellraw @a {"translate":"medabots_server:message.stage.fly_course.start_race.laps.money","color":"green","with":[{"score":{"objective":"FlyCourseLaps","name":"@s"}},{"translate":"medabots_server:location.fly_course.medium"},{"text":"1"},{"score":{"objective":"FlyCourseFee","name":"@s"}}]}
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run data merge block -89 121 -77 {Text1:'{"text":"","clickEvent":{"action":"run_command","value":"function medabots_server:stage/join/medium_fly_course_1/cancel"}}',Text3:'{"translate":"medabots_server:sign.stage.cancel"}'}
execute if entity @s[scores={Dialog=0,Verified=3},gamemode=adventure] if score @s Money >= @s FlyCourseFee run scoreboard players operation @s Money -= @s FlyCourseFee
tellraw @s[scores={Dialog=1..}] {"translate":"medabots_server:message.stage.dialog","color":"green"}
tellraw @s[scores={StageIndex=-1..,State=3}] {"translate":"medabots_server:message.stage.fly_course.cant_leave","color":"green"}