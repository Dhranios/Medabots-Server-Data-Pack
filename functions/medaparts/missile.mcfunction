# Increase time by 1
scoreboard players add @s Time 1

# Set which part is activated
scoreboard players set @s[scores={Time=2,Missile=2},nbt={Inventory:[{Slot:3b,tag:{medabots_server:{id:"medabots_server:saikachis_balister"}}}]}] MedapartType 1
scoreboard players set @s[scores={Time=2,Missile=1},nbt={Inventory:[{Slot:1b,tag:{medabots_server:{id:"medabots_server:rhinrush_rhinoburn"}}}]}] MedapartType 2
scoreboard players set @s[scores={Time=2,Missile=3},nbt={Inventory:[{Slot:2b,tag:{medabots_server:{id:"medabots_server:rhinorush_rhinogone"}}}]}] MedapartType 3
scoreboard players set @s[scores={Time=2,Missile=2},nbt={Inventory:[{Slot:3b,tag:{medabots_server:{id:"medabots_server:abyss_greater_enticed"}}}]}] MedapartType 4
scoreboard players set @s[scores={Time=2,Missile=2},nbt={Inventory:[{Slot:3b,tag:{medabots_server:{id:"medabots_server:blackbeetle_blackbalister"}}}]}] MedapartType 5
scoreboard players set @s[scores={Time=2,Missile=3},nbt={Inventory:[{Slot:2b,tag:{medabots_server:{id:"medabots_server:god_emperor_death_missile"}}}]}] MedapartType 6
scoreboard players set @s[scores={Time=2,Missile=3},nbt={Inventory:[{Slot:2b,tag:{medabots_server:{id:"medabots_server:mewtwo_shadow_ball"}}}]}] MedapartType 7
scoreboard players set @s[scores={Time=2,Missile=2},nbt={Inventory:[{Slot:3b,tag:{medabots_server:{id:"medabots_server:metabee_missile"}}}]}] MedapartType 8
scoreboard players set @s[scores={Time=2,Missile=2},nbt={Inventory:[{Slot:3b,tag:{medabots_server:{id:"medabots_server:pururun_jelly_missilebase"}}}]}] MedapartType 9
scoreboard players set @s[scores={Time=2,Missile=3},nbt={Inventory:[{Slot:2b,tag:{medabots_server:{id:"medabots_server:pururun_jelly_intermissile"}}}]}] MedapartType 9
scoreboard players set @s[scores={Time=2,Missile=1},nbt={Inventory:[{Slot:1b,tag:{medabots_server:{id:"medabots_server:pururun_jelly_guidemissile"}}}]}] MedapartType 10

# Jump the time value up for right and left arm
scoreboard players set @s[scores={Time=3,Missile=1}] Time 19
scoreboard players set @s[scores={Time=3,Missile=3}] Time 27

# Give the weapon
replaceitem entity @s[scores={Time=32}] weapon.offhand minecraft:tipped_arrow{Potion:"minecraft:water",CustomPotionColor:16777215,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.bullet\"}"},CustomPotionEffects:[{Id:18b,Amplifier:3b,Duration:0,Ambient:1b,ShowParticles:0b}],medabots_server:{id:"medabots_server:bullet"}}
replaceitem entity @s[scores={Missile=1,Time=32..34,Drop=0}] hotbar.1 minecraft:bow{Unbreakable:1b,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.generic.shoot\"}"]},Enchantments:[{id:"minecraft:power",lvl:5s}],medabots_server:{id:"medabots_server:laser"}}
replaceitem entity @s[scores={Missile=3,Time=32..34,Drop=0}] hotbar.2 minecraft:bow{Unbreakable:1b,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.generic.shoot\"}"]},Enchantments:[{id:"minecraft:power",lvl:5s}],medabots_server:{id:"medabots_server:laser"}}
replaceitem entity @s[scores={Missile=2,Time=32..34,Drop=0}] hotbar.3 minecraft:bow{Unbreakable:1b,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.generic.shoot\"}"]},Enchantments:[{id:"minecraft:power",lvl:5s}],medabots_server:{id:"medabots_server:laser"}}
replaceitem entity @s[scores={Missile=2,Time=32..34},type=!minecraft:player] weapon.mainhand minecraft:bow{Unbreakable:1b,display:{Name:"{\"translate\":\"medabots_server:move_missile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.generic.shoot\"}"]},Enchantments:[{id:"minecraft:power",lvl:5s}],medabots_server:{id:"medabots_server:laser"}}

# Remove from head uses if this was the head part
scoreboard players remove @s[scores={Missile=2,Time=32}] HeadUses 1

# Remove the weapon
clear @s[scores={Time=84}] minecraft:tipped_arrow{medabots_server:{id:"medabots_server:bullet"}}
clear @s[scores={Time=84}] minecraft:bow{medabots_server:{id:"medabots_server:laser"}}
replaceitem entity @s[scores={Time=84},type=!minecraft:player] weapon.offhand minecraft:air
replaceitem entity @s[scores={Time=84},type=!minecraft:player] weapon.mainhand minecraft:air

# Give back the original part
replaceitem entity @s[scores={MedapartType=1,Time=86..,Drop=0}] hotbar.3 minecraft:fishing_rod{Damage:4,Unbreakable:1b,HideFlags:4,CustomModelData:47,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.saikachis_balister\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.more\",\"with\":[{\"text\":\"6\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"75\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.saikachis\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.saikachis_balister.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.saikachis_balister.model\"}"]},medabots_server:{id:"medabots_server:saikachis_balister",gender:0b,move:"missile",part:"head",armor:75,power:28,uses:6,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=2,Time=86..,Drop=0}] hotbar.1 minecraft:fishing_rod{Damage:2,Unbreakable:1b,HideFlags:4,CustomModelData:35,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.rhinorush_rhinoburn\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.infinite\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"65\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","Rhinorush","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.rhinorush_rhinoburn.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.rhinorush_rhinoburn.model\"}"]},medabots_server:{id:"medabots_server:rhinorush_rhinoburn",gender:0b,move:"missile",part:"left_arm",armor:65,power:22,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=3,Time=86..,Drop=0}] hotbar.2 minecraft:fishing_rod{Damage:3,Unbreakable:1b,HideFlags:4,CustomModelData:35,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.rhinorush_rhinogone\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.infinite\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"65\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","Rhinorush","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.rhinorush_rhinogone.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.rhinorush_rhinogone.model\"}"]},medabots_server:{id:"medabots_server:rhinorush_rhinogone",gender:0b,move:"missile",part:"right_arm",armor:65,power:17,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=4,Time=86..,Drop=0}] hotbar.3 minecraft:fishing_rod{Damage:4,Unbreakable:1b,HideFlags:4,CustomModelData:22,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.abyss_greater_enticed\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.more\",\"with\":[{\"text\":\"5\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"75\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.abyss_greater\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.abyss_greater_enticed.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.abyss_greater_enticed.model\"}"]},medabots_server:{id:"medabots_server:abyss_greater_enticed",gender:0b,move:"missile",part:"head",armor:75,power:29,uses:5,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=5,Time=86..,Drop=0}] hotbar.3 minecraft:fishing_rod{Damage:4,Unbreakable:1b,HideFlags:4,CustomModelData:24,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.blackbeetle_blackbalister\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.more\",\"with\":[{\"text\":\"6\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"65\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.female\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.blackbeetle\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.blackbeetle_blackbalister.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.blackbeetle_blackbalister.model\"}"]},medabots_server:{id:"medabots_server:blackbeetle_blackbalister",gender:1b,move:"missile",part:"head",armor:65,power:31,uses:6,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=6,Time=86..,Drop=0}] hotbar.2 minecraft:fishing_rod{Damage:3,Unbreakable:1b,HideFlags:4,CustomModelData:17,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.god_emperor_death_missile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.infinite\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"50\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.god_emperor\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.god_emperor_death_missile.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.god_emperor_death_missile.model\"}"]},medabots_server:{id:"medabots_server:god_emperor_death_missile",gender:0b,move:"missile",part:"right_arm",armor:50,power:51,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=7,Time=86..,Drop=0}] hotbar.2 minecraft:fishing_rod{Damage:3,Unbreakable:1b,HideFlags:4,CustomModelData:52,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.mewtwo_shadow_ball\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.infinite\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"60\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.mewtwo\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.mewtwo_shadow_ball.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.mewtwo_shadow_ball.model\"}"]},medabots_server:{id:"medabots_server:mewtwo_shadow_ball",gender:0b,move:"missile",part:"right_arm",armor:60,power:25,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=8,Time=86..,Drop=0}] hotbar.3 minecraft:fishing_rod{Damage:4,Unbreakable:1b,HideFlags:4,CustomModelData:62,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.metabee_missile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.more\",\"with\":[{\"text\":\"3\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"50\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.metabee\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.metabee_missile.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.metabee_missile.model\"}"]},medabots_server:{id:"medabots_server:metabee_missile",gender:0b,move:"missile",part:"head",armor:50,power:29,uses:3,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=9,Time=86..,Drop=0}] hotbar.1 minecraft:fishing_rod{Damage:2,Unbreakable:1b,HideFlags:4,CustomModelData:65,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_guidemissile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.infinite\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"20\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.pururun_jelly\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_guidemissile.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_guidemissile.model\"}"]},medabots_server:{id:"medabots_server:pururun_jelly_guidemissile",gender:0b,move:"missile",part:"left_arm",armor:20,power:23,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=10,Time=86..,Drop=0}] hotbar.3 minecraft:fishing_rod{Damage:4,Unbreakable:1b,HideFlags:4,CustomModelData:65,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_missilebase\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.more\",\"with\":[{\"text\":\"2\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"70\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.pururun_jelly\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_missilebase.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_missilebase.model\"}"]},medabots_server:{id:"medabots_server:pururun_jelly_missilebase",gender:0b,move:"missile",part:"head",armor:70,power:40,uses:2,activated:1b,version:1}}
replaceitem entity @s[scores={MedapartType=11,Time=86..,Drop=0}] hotbar.2 minecraft:fishing_rod{Damage:3,Unbreakable:1b,HideFlags:4,CustomModelData:65,display:{Name:"{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_intermissile\"}",Lore:["{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:move.missile.description\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.uses.infinite\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.armor\",\"with\":[{\"text\":\"20\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.male\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:entity.pururun_jelly\"}","","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_intermissile.quote\"}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.part.wave\",\"with\":[{\"text\":\"1\"}]}","{\"italic\":false,\"color\":\"white\",\"translate\":\"medabots_server:item.pururun_jelly_intermissile.model\"}"]},medabots_server:{id:"medabots_server:pururun_jelly_intermissile",gender:0b,move:"missile",part:"right_arm",armor:20,power:15,activated:1b,version:1}}

# Finish the move
scoreboard players reset @s[scores={Missile=1,Time=86..},nbt={Inventory:[{Slot:1b,tag:{medabots_server:{part:"left_arm"}}}]}] Missile
scoreboard players reset @s[scores={Missile=3,Time=86..},nbt={Inventory:[{Slot:2b,tag:{medabots_server:{part:"right_arm"}}}]}] Missile
scoreboard players reset @s[scores={Missile=2,Time=86..},nbt={Inventory:[{Slot:3b,tag:{medabots_server:{part:"head"}}}]}] Missile
scoreboard players reset @s[scores={Missile=1..,Time=86..},type=!minecraft:player] Missile
execute unless entity @s[scores={Missile=1..}] run scoreboard players reset @s MedapartType
execute unless entity @s[scores={Missile=1..}] run scoreboard players set @s Time 1

# Attacked by shooting trap
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=!ally_team,tag=!enemy_team] run effect give @s[tag=!undead] minecraft:instant_damage 1 0 true
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=!ally_team,tag=!enemy_team] run effect give @s[tag=undead] minecraft:instant_health 1 0 true
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=!ally_team,tag=!enemy_team] if entity @s[scores={Death=1..},type=minecraft:player] run tellraw @a {"translate":"medabots_server:death.shooting_trap","with":[{"selector":"@s"}]}
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=!ally_team,tag=!enemy_team] run tag @s[scores={Death=1..}] add had_death
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=!ally_team,tag=!enemy_team] run playsound medabots_server:entity.medabot.attack.trap_hit player @a ~ ~ ~ 1
kill @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=!ally_team,tag=!enemy_team]
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=ally_team] run effect give @s[tag=!undead,tag=!ally_medabot] minecraft:instant_damage 1 0 true
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=ally_team] run effect give @s[tag=undead,tag=!ally_medabot] minecraft:instant_health 1 0 true
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=ally_team] if entity @s[scores={Death=1..},type=minecraft:player,tag=!ally_medabot] run tellraw @a {"translate":"medabots_server:death.shooting_trap","with":[{"selector":"@s"}]}
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=ally_team] run tag @s[scores={Death=1..},tag=!ally_medabot] add had_death
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=ally_team] if entity @s[tag=!ally_medabot] run playsound medabots_server:entity.medabot.attack.trap_hit player @a ~ ~ ~ 1
kill @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=ally_team]
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=enemy_team] run effect give @s[tag=!undead,tag=!enemy_medabot] minecraft:instant_damage 1 0 true
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=enemy_team] run effect give @s[tag=undead,tag=!enemy_medabot] minecraft:instant_health 1 0 true
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=enemy_team] if entity @s[scores={Death=1..},type=minecraft:player,tag=!enemy_medabot] run tellraw @a {"translate":"medabots_server:death.shooting_trap","with":[{"selector":"@s"}]}
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=enemy_team] run tag @s[scores={Death=1..},tag=!enemy_medabot] add had_death
execute if entity @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=enemy_team] if entity @s[tag=!enemy_medabot] run playsound medabots_server:entity.medabot.attack.trap_hit player @a ~ ~ ~ 1
kill @e[distance=..3,type=minecraft:area_effect_cloud,tag=shooting_trap,tag=enemy_team]