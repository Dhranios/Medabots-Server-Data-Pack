execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 #minecraft:slabs align y run teleport @s ^ ^0.5 ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 #minecraft:slabs[type=bottom] run teleport @s ^ ^ ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] if block ~ ~ ~ #minecraft:slabs unless block ^ ^ ^0.4 #minecraft:slabs[type=bottom] unless block ^ ^ ^0.4 minecraft:air unless block ^ ^ ^0.4 minecraft:comparator if block ^ ^0.5 ^0.4 minecraft:air align y run teleport @s ^ ^1 ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=slow] if block ~ ~ ~ #minecraft:slabs unless block ^ ^ ^0.4 #minecraft:slabs[type=bottom] unless block ^ ^ ^0.4 minecraft:air unless block ^ ^ ^0.4 minecraft:comparator if block ^ ^0.5 ^0.4 minecraft:comparator align y run teleport @s ^ ^1 ^0.1 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 #minecraft:slabs align y run teleport @s ^ ^0.5 ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 #minecraft:slabs[type=bottom] run teleport @s ^ ^ ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] if block ~ ~ ~ #minecraft:slabs unless block ^ ^ ^0.4 #minecraft:slabs[type=bottom] unless block ^ ^ ^0.4 minecraft:air unless block ^ ^ ^0.4 minecraft:comparator if block ^ ^0.5 ^0.4 minecraft:air align y run teleport @s ^ ^1 ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=!slow,tag=!fast] if block ~ ~ ~ #minecraft:slabs unless block ^ ^ ^0.4 #minecraft:slabs[type=bottom] unless block ^ ^ ^0.4 minecraft:air unless block ^ ^ ^0.4 minecraft:comparator if block ^ ^0.5 ^0.4 minecraft:comparator align y run teleport @s ^ ^1 ^0.2 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] unless block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 #minecraft:slabs align y run teleport @s ^ ^0.5 ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] if block ~ ~ ~ #minecraft:slabs if block ^ ^ ^0.4 #minecraft:slabs[type=bottom] run teleport @s ^ ^ ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] if block ~ ~ ~ #minecraft:slabs unless block ^ ^ ^0.4 #minecraft:slabs[type=bottom] unless block ^ ^ ^0.4 minecraft:air unless block ^ ^ ^0.4 minecraft:comparator if block ^ ^0.5 ^0.4 minecraft:air align y run teleport @s ^ ^1 ^0.4 ~ ~
execute unless block ~ ~ ~ minecraft:water if entity @s[tag=fast] if block ~ ~ ~ #minecraft:slabs unless block ^ ^ ^0.4 #minecraft:slabs[type=bottom] unless block ^ ^ ^0.4 minecraft:air unless block ^ ^ ^0.4 minecraft:comparator if block ^ ^0.5 ^0.4 minecraft:comparator align y run teleport @s ^ ^1 ^0.4 ~ ~

execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=slow] if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.1 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=slow] if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.1 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=slow] if block ^ ^ ^0.4 #minecraft:slabs align y run teleport @s ^ ^0.5 ^0.1 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=!slow,tag=!fast] if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.2 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=!slow,tag=!fast] if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.2 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=!slow,tag=!fast] if block ^ ^ ^0.4 #minecraft:slabs align y run teleport @s ^ ^0.5 ^0.2 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=fast] if block ^ ^ ^0.4 minecraft:air run teleport @s ^ ^ ^0.4 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=fast] if block ^ ^ ^0.4 minecraft:comparator run teleport @s ^ ^ ^0.4 ~ ~
execute if block ~ ~ ~ minecraft:water positioned ~ ~1 ~ if entity @s[tag=fast] if block ^ ^ ^0.4 #minecraft:slabs align y run teleport @s ^ ^0.5 ^0.4 ~ ~

execute at @s if block ~ ~ ~ minecraft:air if block ~ ~-1 ~ minecraft:water run teleport @s ~ ~-1 ~ ~ ~