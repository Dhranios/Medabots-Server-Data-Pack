execute if block ~ ~-1 ~ minecraft:air run tag @s remove allowed
execute if block ~ ~-1 ~ minecraft:water run tag @s remove allowed
execute if block ~ ~-1 ~ minecraft:barrier run tag @s remove allowed

execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=58}] run function medabots_server:set_blocks/laser_trap/east/delay_15/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=58}] run function medabots_server:set_blocks/laser_trap/north/delay_15/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=58}] run function medabots_server:set_blocks/laser_trap/south/delay_15/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=58}] run function medabots_server:set_blocks/laser_trap/west/delay_15/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=59}] run function medabots_server:set_blocks/laser_trap/east/delay_14/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=59}] run function medabots_server:set_blocks/laser_trap/north/delay_14/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=59}] run function medabots_server:set_blocks/laser_trap/south/delay_14/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=59}] run function medabots_server:set_blocks/laser_trap/west/delay_14/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=60}] run function medabots_server:set_blocks/laser_trap/east/delay_13/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=60}] run function medabots_server:set_blocks/laser_trap/north/delay_13/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=60}] run function medabots_server:set_blocks/laser_trap/south/delay_13/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=60}] run function medabots_server:set_blocks/laser_trap/west/delay_13/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=61}] run function medabots_server:set_blocks/laser_trap/east/delay_12/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=61}] run function medabots_server:set_blocks/laser_trap/north/delay_12/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=61}] run function medabots_server:set_blocks/laser_trap/south/delay_12/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=61}] run function medabots_server:set_blocks/laser_trap/west/delay_12/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=62}] run function medabots_server:set_blocks/laser_trap/east/delay_11/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=62}] run function medabots_server:set_blocks/laser_trap/north/delay_11/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=62}] run function medabots_server:set_blocks/laser_trap/south/delay_11/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=62}] run function medabots_server:set_blocks/laser_trap/west/delay_11/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=101}] run function medabots_server:set_blocks/laser_trap/east/delay_10/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=101}] run function medabots_server:set_blocks/laser_trap/north/delay_10/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=101}] run function medabots_server:set_blocks/laser_trap/south/delay_10/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=101}] run function medabots_server:set_blocks/laser_trap/west/delay_10/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=102}] run function medabots_server:set_blocks/laser_trap/east/delay_9/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=102}] run function medabots_server:set_blocks/laser_trap/north/delay_9/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=102}] run function medabots_server:set_blocks/laser_trap/south/delay_9/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=102}] run function medabots_server:set_blocks/laser_trap/west/delay_9/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=103}] run function medabots_server:set_blocks/laser_trap/east/delay_8/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=103}] run function medabots_server:set_blocks/laser_trap/north/delay_8/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=103}] run function medabots_server:set_blocks/laser_trap/south/delay_8/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=103}] run function medabots_server:set_blocks/laser_trap/west/delay_8/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=104}] run function medabots_server:set_blocks/laser_trap/east/delay_7/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=104}] run function medabots_server:set_blocks/laser_trap/north/delay_7/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=104}] run function medabots_server:set_blocks/laser_trap/south/delay_7/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=104}] run function medabots_server:set_blocks/laser_trap/west/delay_7/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=105}] run function medabots_server:set_blocks/laser_trap/east/delay_6/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=105}] run function medabots_server:set_blocks/laser_trap/north/delay_6/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=105}] run function medabots_server:set_blocks/laser_trap/south/delay_6/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=105}] run function medabots_server:set_blocks/laser_trap/west/delay_6/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=106}] run function medabots_server:set_blocks/laser_trap/east/delay_5/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=106}] run function medabots_server:set_blocks/laser_trap/north/delay_5/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=106}] run function medabots_server:set_blocks/laser_trap/south/delay_5/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=106}] run function medabots_server:set_blocks/laser_trap/west/delay_5/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=107}] run function medabots_server:set_blocks/laser_trap/east/delay_4/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=107}] run function medabots_server:set_blocks/laser_trap/north/delay_4/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=107}] run function medabots_server:set_blocks/laser_trap/south/delay_4/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=107}] run function medabots_server:set_blocks/laser_trap/west/delay_4/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=108}] run function medabots_server:set_blocks/laser_trap/east/delay_3/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=108}] run function medabots_server:set_blocks/laser_trap/north/delay_3/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=108}] run function medabots_server:set_blocks/laser_trap/south/delay_3/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=108}] run function medabots_server:set_blocks/laser_trap/west/delay_3/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=109}] run function medabots_server:set_blocks/laser_trap/east/delay_2/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=109}] run function medabots_server:set_blocks/laser_trap/north/delay_2/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=109}] run function medabots_server:set_blocks/laser_trap/south/delay_2/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=109}] run function medabots_server:set_blocks/laser_trap/west/delay_2/power_1
execute if entity @s[y_rotation=45..135,tag=allowed,scores={StageBuild=110}] run function medabots_server:set_blocks/laser_trap/east/delay_1/power_1
execute if entity @s[y_rotation=-45..45,tag=allowed,scores={StageBuild=110}] run function medabots_server:set_blocks/laser_trap/north/delay_1/power_1
execute if entity @s[y_rotation=135..-135,tag=allowed,scores={StageBuild=110}] run function medabots_server:set_blocks/laser_trap/south/delay_1/power_1
execute if entity @s[y_rotation=-135..-45,tag=allowed,scores={StageBuild=110}] run function medabots_server:set_blocks/laser_trap/west/delay_1/power_1
tag @e[distance=..0.7,tag=laser_trap] add no_ticking