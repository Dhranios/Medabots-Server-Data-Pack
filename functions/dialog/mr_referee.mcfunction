# "Look at the sky, the stars, and the universe, there is no better robattle referee in this whole universe than I, Mr. Referee! Enjoy the robattle from the bottom of your heart! Are you ready?"
execute unless entity @s[scores={Dialog=0..}] run scoreboard players set @s Dialog 0
scoreboard players add @s[scores={Dialog=..193}] Dialog 1
execute if entity @s[scores={Dialog=2}] as @e[tag=hostile,tag=!dead] unless entity @s[type=!minecraft:player,type=!minecraft:skeleton] if score @s Stage = @e[distance=..0.1,limit=1] Stage run tag @s add waiting_for_referee
data merge entity @s[scores={Dialog=2}] {CustomNameVisible:0b,ShowArms:1b,NoBasePlate:1b,Small:0b,Invisible:0b,NoGravity:1b,Marker:1b,HandItems:[{},{}],ArmorItems:[{id:"minecraft:leather_boots",Count:1b,tag:{Unbreakable:1b,AttributeModifiers:[],display:{color:5921370}}},{id:"minecraft:leather_leggings",Count:1b,tag:{Unbreakable:1b,AttributeModifiers:[],display:{color:4342338}}},{id:"minecraft:leather_chestplate",Count:1b,tag:{Unbreakable:1b,AttributeModifiers:[],display:{color:13816530}}},{id:"minecraft:player_head",Count:1b,Damage:3s,tag:{SkullOwner:{Id:"Mr_Referee",Properties:{textures:[{Signature:"TuHci2Cj+a9irXk2euKg4p1yo3HIUbMaTxCPGpWWQDHHAkN3sN+h5kRyDGiirfihwReDmontRatqAjXiYumNSDBrLFJ1EP75+AeCVeoweSurcPHCzuQjmjE+LvqSkdoPGmf0u3fsFdsY9lebiN+Bc/5z+Uv6R1ihlx9XyyeOwtyvF4mWb4k7IlOGuG6yfeqCxAUyLHzB26xznsLPP3vrhRsR07qhKbuPx/U5BIt7YvgR30L8qmTzmmSNAm6r7uh2UmcEUwGhTQLWw9JXvW8inUvlLpYqEgncPIzKT1o9VwrDGrRZG3U6h5j50i9haME8ZiqRI881lWO/HhhNMemx1krD2pQmFV+e+aKhPvxE/PsQNCpYmEUV+b6/2R6r+Med7NrZ+DAGTXUzjCbvvBnaMtUh6HCR++0HCfil8+nKRsil1KB4FRoprvztxvl57eNlkBY7y7S9GxIq9FIoqY9gSFtmTe26PB+rrwYufZYBEqyw9u2u8xRnR0QS92l6QEbUqWekkrQH9nX9RlzwQqpNkb5PcZeOYPzlPnBJZHJ6itbJcfwokWPIGtzHEZKz1fc29uocB2wn7XxOqPsefvlPrET+q9t+pr/swlmjLvI8DCOPHb9ZdhghXw1YvecSol9v5yF2sPo/CrMQjB2b1V8PEYJJDN5Jj6XRJHmoF+X5Wz0=",Value:"eyJ0aW1lc3RhbXAiOjE0OTU3MDYzNjM4OTcsInByb2ZpbGVJZCI6Ijc5YmY5OWUxNjIxYzRlOTFiZDgxYTc3YTA4YjM4NmJhIiwicHJvZmlsZU5hbWUiOiJGVmJpY28iLCJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYzZmN2I0N2U3ZWEwOTc2NWM5NjRkOWI1ZWRjNGQzYzNkNTdiOWQ4ZGQ2YWJmZWZiZDUzNTljNjZiMTBlZjFjIn0sIkNBUEUiOnsidXJsIjoiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS9mOGI1NWNhMzIyZTY0YTM4MWI2NDg0ZGFjMmQ4YWE0MmM3OGM2MTI5MzM2ZWEzZWY0NTk2ZjFkMzFiMjdlZiJ9fX0="}]},Name:"Mr_Referee"}}}],DisabledSlots:2039583}
execute if entity @s[scores={Dialog=2}] run scoreboard players set @e[tag=waiting_for_referee,scores={Battle=1}] Battle 2
execute if entity @s[scores={Dialog=2},tag=!no_overwrite] run stopsound @a[tag=waiting_for_referee] music
execute if entity @s[scores={Dialog=2},tag=!no_overwrite] run playsound medabots_server:music.entity.mr_referee music @a[tag=waiting_for_referee] ~ ~ ~ 1000
execute if entity @s[scores={Dialog=2},tag=!no_overwrite] run scoreboard players set @a[tag=waiting_for_referee] Music 193
execute if entity @s[scores={Dialog=2}] run tellraw @a {"translate":"chat.type.text","with":[{"translate":"medabots_server:entity.mr_referee"},{"translate":"medabots_server:message.mr_referee.speech.1.1","with":[{"selector":"@e[tag=waiting_for_referee]"}]}]}
execute if entity @s[scores={Dialog=2}] run tag @e[tag=waiting_for_referee] remove waiting_for_referee
execute if entity @s[scores={Dialog=82}] run tellraw @a {"translate":"chat.type.text","with":[{"translate":"medabots_server:entity.mr_referee"},{"translate":"medabots_server:message.mr_referee.speech.1.2","with":[{"translate":"medabots_server:entity.mr_referee"}]}]}
execute if entity @s[scores={Dialog=193}] run tellraw @a {"translate":"chat.type.text","with":[{"translate":"medabots_server:entity.mr_referee"},{"translate":"medabots_server:message.mr_referee.speech.1.3"}]}
execute if entity @s[scores={Dialog=193}] as @e[tag=hostile,tag=!dead] unless entity @s[type=!minecraft:player,type=!minecraft:skeleton] if score @s Stage = @e[distance=..0.1,limit=1] Stage run tag @s add waiting_for_referee
execute if entity @s[scores={Dialog=193}] run stopsound @a[tag=waiting_for_referee] music medabots_server:music.entity.mr_referee
execute if entity @s[scores={Dialog=193},tag=!no_overwrite] run scoreboard players set @a[tag=waiting_for_referee] MusicType 26
execute if entity @s[scores={Dialog=193},tag=!no_overwrite] at @e[tag=enemy_medabot,scores={Battle=2},tag=overwrite_robattle_music] run scoreboard players operation @a[tag=waiting_for_referee] MusicType = @e[tag=enemy_medabot,scores={Battle=2},tag=overwrite_robattle_music] MusicType
execute if entity @s[scores={Dialog=193}] run scoreboard players set @e[tag=waiting_for_referee] Battle 1
execute if entity @s[scores={Dialog=193}] run tag @e[tag=waiting_for_referee] remove waiting_for_referee
data merge entity @s[scores={Dialog=194}] {Small:1b,Invisible:1b,ArmorItems:[{},{},{},{}]}